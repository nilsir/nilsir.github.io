import{_ as a,r as i,o as l,c as t,a as n,e as c,F as p,d as o,b as s}from"./app.afab71f0.js";const d={},r=o(`<h1 id="php\u73AF\u5883\u642D\u5EFA-mac\u7248" tabindex="-1"><a class="header-anchor" href="#php\u73AF\u5883\u642D\u5EFA-mac\u7248" aria-hidden="true">#</a> PHP\u73AF\u5883\u642D\u5EFA(MAC\u7248)</h1><h2 id="\u642D\u5EFA\u524D\u5FC5\u770B" tabindex="-1"><a class="header-anchor" href="#\u642D\u5EFA\u524D\u5FC5\u770B" aria-hidden="true">#</a> \u642D\u5EFA\u524D\u5FC5\u770B</h2><ol><li><p>\u4ED4\u7EC6\u9605\u8BFB\u6587\u6863</p></li><li><p>\u6309\u7167\u6587\u6863\u6B65\u9AA4\u4F9D\u6B21\u6765\u6267\u884C<br> \u6309\u7167\u6587\u6863\u6B65\u9AA4\u4F9D\u6B21\u6765\u6267\u884C<br> \u6309\u7167\u6587\u6863\u6B65\u9AA4\u4F9D\u6B21\u6765\u6267\u884C</p></li><li><p>\u7981\u6B62 brew \u81EA\u52A8\u66F4\u65B0, \u5728\u4F60\u7684 .profile \u6587\u4EF6, \u6216\u8005 .zshrc \u6587\u4EF6\u4E2D\u8FFD\u52A0\u5982\u4E0B\u5185\u5BB9:</p></li></ol><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>export HOMEBREW_AUTO_UPDATING=0
export HOMEBREW_NO_AUTO_UPDATE=1
export HOMEBREW_NO_INSTALL_CLEANUP=1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li><p>\u62C9\u53D6\u4EE3\u7801\u7684\u65F6\u5019\u4E00\u5B9A\u8981\u6CE8\u610F, web \u7684\u76EE\u5F55\u4F1A\u91CD\u547D\u540D\u4E3A pc</p></li><li><p>\u9047\u5230\u95EE\u9898\u4ED4\u7EC6\u5BF9\u7167\u6587\u6863, \u8D85\u8FC7\u534A\u4E2A\u5C0F\u65F6\u6CA1\u6CD5\u89E3\u51B3\u518D\u95EE</p></li></ol><h2 id="\u642D\u5EFA\u6B65\u9AA4" tabindex="-1"><a class="header-anchor" href="#\u642D\u5EFA\u6B65\u9AA4" aria-hidden="true">#</a> \u642D\u5EFA\u6B65\u9AA4</h2><h3 id="\u4E00\u3001\u62C9\u53D6\u4EE3\u7801" tabindex="-1"><a class="header-anchor" href="#\u4E00\u3001\u62C9\u53D6\u4EE3\u7801" aria-hidden="true">#</a> \u4E00\u3001\u62C9\u53D6\u4EE3\u7801</h3><ol><li><p>\u914D\u7F6E\u4EE3\u7801\u76EE\u5F55 <code>md ~/code/www</code></p></li><li><p>\u62C9\u53D6 admin \u4EE3\u7801 <code>git clone http://code.starlinke.cn/galaxyme/admin.git</code></p></li><li><p>\u62C9\u53D6 api \u4EE3\u7801 <code>git clone http://code.starlinke.cn/galaxyme/api.git</code></p></li><li><p>\u62C9\u53D6 pc \u4EE3\u7801 <code>git clone http://code.starlinke.cn/galaxyme/web.git pc</code></p></li></ol><h3 id="\u4E8C\u3001\u5B89\u88C5php" tabindex="-1"><a class="header-anchor" href="#\u4E8C\u3001\u5B89\u88C5php" aria-hidden="true">#</a> \u4E8C\u3001\u5B89\u88C5php</h3><ol><li><p>\u5B89\u88C5 php <code>brew install shivammathur/php/php@7.1</code></p></li><li><p>\u8BBE\u7F6E\u8F6F\u8FDE\u63A5 <code>brew unlink php@7.1 &amp;&amp; brew link --force php@7.1</code></p></li><li><p>\u91CD\u542F\u7EC8\u7AEF</p></li><li><p>\u786E\u8BA4\u7248\u672C <code>php -v</code> \u662F\u4E0D\u662F\u663E\u793A7.1</p></li><li><p>\u91CD\u542Fphp <code>brew services restart php@7.1</code></p></li></ol><h3 id="\u4E09\u3001-nginx\u5B89\u88C5\u5E76\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u4E09\u3001-nginx\u5B89\u88C5\u5E76\u914D\u7F6E" aria-hidden="true">#</a> \u4E09\u3001 nginx\u5B89\u88C5\u5E76\u914D\u7F6E</h3><ol><li><p>\u5B89\u88C5 nginx <code>brew install nginx</code></p></li><li><p>\u914D\u7F6Estarverse.conf <code>vim /usr/local/etc/nginx/servers/starverse.conf</code></p></li></ol><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">listen</span> <span class="token number">80</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">server_name</span> ~^.*\\.(.*)-(?&lt;site&gt;.+)\\.com\\.(?&lt;branch&gt;.+)\\.fpm.testsdlk\\.test$</span><span class="token punctuation">;</span>
    <span class="token comment"># \u9700\u8981\u6539\u4E3A\u81EA\u5DF1\u7684\u76EE\u5F55</span>
    <span class="token directive"><span class="token keyword">root</span> /Users/nilsir/code/starlink/galaxy/<span class="token variable">$site</span>/htdocs</span><span class="token punctuation">;</span>

    <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">index</span> index.php</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">try_files</span> <span class="token variable">$uri</span> <span class="token variable">$uri</span>/ /index.php?<span class="token variable">$args</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token directive"><span class="token keyword">location</span> ~ \\.php$</span> <span class="token punctuation">{</span>
        <span class="token comment"># \u9700\u8981\u6539\u4E3A\u81EA\u5DF1php-fpm\u7684\u7AEF\u53E3</span>
        <span class="token directive"><span class="token keyword">fastcgi_pass</span> 127.0.0.1:9009</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">fastcgi_index</span> index.php</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">fastcgi_param</span> SCRIPT_FILENAME <span class="token variable">$document_root</span><span class="token variable">$fastcgi_script_name</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">include</span> fastcgi_params</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">fastcgi_param</span> ENV <span class="token string">&#39;dev&#39;</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">fastcgi_param</span> site-env <span class="token string">&#39;dev&#39;</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token directive"><span class="token keyword">location</span> ~ .*\\.(gif|jpg|jpeg|png|bmp|swf|js|css|woff2)$</span> <span class="token punctuation">{</span>
        <span class="token comment"># \u9700\u8981\u6539\u4E3A\u81EA\u5DF1\u7684\u76EE\u5F55</span>
        <span class="token directive"><span class="token keyword">root</span> /Users/nilsir/code/starlink/galaxy/<span class="token variable">$site</span>/htdocs</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token directive"><span class="token keyword">location</span> ~ .*(\\.user.ini|\\.htaccess|\\.git|\\.svn|\\.project|LICENSE|README.md)$</span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">deny</span> all</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token directive"><span class="token keyword">location</span> ^~ /runtime/log/</span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">deny</span> all</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment"># \u9700\u8981\u6539\u4E3A\u81EA\u5DF1\u7684\u76EE\u5F55, \u5E76\u521B\u5EFA\u6587\u4EF6</span>
    <span class="token directive"><span class="token keyword">access_log</span> /Users/nilsir/data/wwwlogs/nginx/starverse_access.log</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">error_log</span> /Users/nilsir/data/wwwlogs/nginx/starverse_error.log</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>\u91CD\u542Fnginx <code>brew services restart nginx</code></li></ol><h3 id="\u56DB\u3001-dnsmasq\u5B89\u88C5" tabindex="-1"><a class="header-anchor" href="#\u56DB\u3001-dnsmasq\u5B89\u88C5" aria-hidden="true">#</a> \u56DB\u3001 dnsmasq\u5B89\u88C5</h3><ol><li><p><code>brew install dnsmasq</code></p></li><li><p>/usr/local/etc/dnsmasq.conf \u4E2D\u89E3\u5F00 conf-dir=/usr/local/etc/dnsmasq.d/,*.conf \u7684\u6CE8\u91CA</p></li><li><p>\u5728 /usr/local/etc/dnsmasq.d \u76EE\u5F55\u4E0B\u589E\u52A0 starlinke.conf \u6587\u4EF6, \u5199\u5165\u5185\u5BB9:</p></li></ol><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>address=/.test/127.0.0.1
listen-address=127.0.0.1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>\u914D\u7F6E /etc/resolver/test \u6587\u4EF6\u5185\u5BB9:</li></ol><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>#\u6CE8\u610F: \u5982\u679C\u6CA1\u6709\u8BE5\u6587\u4EF6, \u5C31\u5148\u521B\u5EFA\u76EE\u5F55 sudo mkdir -p /etc/resolver, \u518D\u521B\u5EFA\u4E00\u4E2A\u6587\u4EF6 sudo touch /etc/resolver/test
nameserver 127.0.0.1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li>\u91CD\u542F dnsmasq <code>sudo brew services restart dnsmasq</code></li></ol><h3 id="\u4E94\u3001-\u57DF\u540D\u8BBF\u95EE" tabindex="-1"><a class="header-anchor" href="#\u4E94\u3001-\u57DF\u540D\u8BBF\u95EE" aria-hidden="true">#</a> \u4E94\u3001 \u57DF\u540D\u8BBF\u95EE</h3>`,21),v=s("\u53C2\u8003\u57DF\u540D: "),u={href:"https://wiki.rd.starlinke.cn/pages/viewpage.action?pageId=6790273",target:"_blank",rel:"noopener noreferrer"},k=s("Starverse/V(\u8BED\u8A00|\u57DF\u540D|\u652F\u4ED8)"),m=n("br",null,null,-1),h=s(" \u5206\u652F\u53EF\u4EE5\u4F7F\u7528 release \u5206\u652F"),b=n("br",null,null,-1),g=s(" \u672C\u5730\u57DF\u540D\u4EE5 .test \u7ED3\u5C3E, \u4F8B\u5982: http://admin.vivaiacollection-admin.com.release.fpm.testsdlk.test"),_=n("br",null,null,-1),x=n("p",null,[s("\u6CE8\u610F: \u672C\u5730\u57DF\u540D\u4E0A\u7684\u5206\u652F\u53EA\u505A\u8BBF\u95EE\u4F7F\u7528, \u4EE3\u7801\u4E0D\u4F1A\u6839\u636E\u57DF\u540D\u4E0A\u7684\u5206\u652F\u5207\u6362, \u8BBF\u95EE\u7684\u8FD8\u662F\u672C\u5730\u4EE3\u7801, \u5982\u679C\u9700\u8981\u5207\u6362\u5206\u652F, \u53EF\u4EE5\u672C\u5730\u5207\u6362"),n("br")],-1),w=n("h2",{id:"\u83B7\u53D6\u5E2E\u52A9",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u83B7\u53D6\u5E2E\u52A9","aria-hidden":"true"},"#"),s(" \u83B7\u53D6\u5E2E\u52A9")],-1),f=n("p",null,[s("\u8054\u7CFB\u90AE\u7BB1: nilsir@qq.com"),n("br"),s(" \u8054\u7CFB\u5FAE\u4FE1: Alante28Jul")],-1);function y(E,N){const e=i("ExternalLinkIcon");return l(),t(p,null,[r,n("p",null,[v,n("a",u,[k,c(e)]),m,h,b,g,_]),x,w,f],64)}var $=a(d,[["render",y],["__file","build-php-env-on-mac.html.vue"]]);export{$ as default};
